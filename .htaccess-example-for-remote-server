# File .htaccess da caricare su www.trmnet.work/_regionali2025/
# Questo file permette le richieste CORS da regionali.trmnet.work

<IfModule mod_headers.c>
    # Permetti richieste dal dominio dell'app
    SetEnvIf Origin "^https://regionali\.trmnet\.work$" ORIGIN_DOMAIN=$0
    Header set Access-Control-Allow-Origin "%{ORIGIN_DOMAIN}e" env=ORIGIN_DOMAIN
    
    # Permetti anche localhost per sviluppo
    SetEnvIf Origin "^http://localhost:3001$" ORIGIN_DOMAIN=$0
    Header set Access-Control-Allow-Origin "%{ORIGIN_DOMAIN}e" env=ORIGIN_DOMAIN
    
    # Header aggiuntivi necessari
    Header set Access-Control-Allow-Methods "GET, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Cache-Control, Pragma"
    Header set Access-Control-Max-Age "3600"
</IfModule>

# Gestione richieste OPTIONS (preflight)
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [R=200,L]
</IfModule>
